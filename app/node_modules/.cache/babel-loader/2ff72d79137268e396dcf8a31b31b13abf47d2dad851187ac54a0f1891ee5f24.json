{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sylvainvendeol/Documents/GitHub/escrow-generator/app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _slicedToArray from\"/Users/sylvainvendeol/Documents/GitHub/escrow-generator/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/Users/sylvainvendeol/Documents/GitHub/escrow-generator/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{ethers}from'ethers';import{useEffect,useState}from'react';import deploy from'./vestingDeploy';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var provider=new ethers.providers.Web3Provider(window.ethereum);export function claim(_x,_x2){return _claim.apply(this,arguments);}function _claim(){_claim=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(vestingContract,signer){var approveTxn;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return vestingContract.connect(signer).claim();case 2:approveTxn=_context3.sent;_context3.next=5;return approveTxn.wait();case 5:case\"end\":return _context3.stop();}},_callee3);}));return _claim.apply(this,arguments);}function VestingContract(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),account=_useState2[0],setAccount=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),signer=_useState4[0],setSigner=_useState4[1];useEffect(function(){function getAccounts(){return _getAccounts.apply(this,arguments);}function _getAccounts(){_getAccounts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var accounts;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return provider.send('eth_requestAccounts',[]);case 2:accounts=_context.sent;setAccount(accounts[0]);setSigner(provider.getSigner());case 5:case\"end\":return _context.stop();}},_callee);}));return _getAccounts.apply(this,arguments);}getAccounts();},[account]);function newContract(){return _newContract.apply(this,arguments);}function _newContract(){_newContract=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var beneficiary,numberOfClaims,value,historyContract,vestingContract;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:beneficiary=document.getElementById('beneficiary').value;numberOfClaims=parseInt(document.getElementById('number-of-claims').value);//const vestingIntervals = parseInt(document.getElementById('vesting-intervals').value);\n//Not needed for now, hardcoded to weekly vesting\nvalue=ethers.utils.parseEther(document.getElementById('ETH').value);historyContract=\"0xD81267Ce7922fbaAd6D9ac4422B312D4516586FD\";_context2.next=6;return deploy(historyContract,signer,beneficiary,numberOfClaims,value);case 6:vestingContract=_context2.sent;case 7:case\"end\":return _context2.stop();}},_callee2);}));return _newContract.apply(this,arguments);}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\" New Vesting Contract\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"contract\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Beneficiary Address\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"beneficiary\"})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Number of weeks the vesting should be over\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"number-of-claims\"})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Deposit Amount (in ETH)\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"ETH\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"button\",id:\"deploy\",onClick:function onClick(e){e.preventDefault();newContract();},children:\"Deploy\"})]})]})});}export default VestingContract;","map":{"version":3,"names":["ethers","useEffect","useState","deploy","provider","providers","Web3Provider","window","ethereum","claim","vestingContract","signer","connect","approveTxn","wait","VestingContract","account","setAccount","setSigner","getAccounts","send","accounts","getSigner","newContract","beneficiary","document","getElementById","value","numberOfClaims","parseInt","utils","parseEther","historyContract","e","preventDefault"],"sources":["/Users/sylvainvendeol/Documents/GitHub/escrow-generator/app/src/pages/Vesting/vestingContract.js"],"sourcesContent":["import { ethers } from 'ethers';\nimport { useEffect, useState } from 'react';\nimport deploy from './vestingDeploy';\n\nconst provider = new ethers.providers.Web3Provider(window.ethereum);\n\nexport async function claim(vestingContract, signer) {\n    const approveTxn = await vestingContract.connect(signer).claim();\n    await approveTxn.wait();\n  }\n\nfunction VestingContract() {\n\n    const [account, setAccount] = useState();\n    const [signer, setSigner] = useState();\n\n    useEffect(() => {\n        async function getAccounts() {\n            const accounts = await provider.send('eth_requestAccounts', []);\n    \n            setAccount(accounts[0]);\n            setSigner(provider.getSigner());\n        }\n    \n        getAccounts();\n        }, [account]);\n\n    async function newContract() {\n        const beneficiary = document.getElementById('beneficiary').value;\n        const numberOfClaims = parseInt(document.getElementById('number-of-claims').value);\n        //const vestingIntervals = parseInt(document.getElementById('vesting-intervals').value);\n            //Not needed for now, hardcoded to weekly vesting\n        const value = ethers.utils.parseEther(document.getElementById('ETH').value);\n        const historyContract = \"0xD81267Ce7922fbaAd6D9ac4422B312D4516586FD\";\n        const vestingContract = await deploy(historyContract, signer, beneficiary, numberOfClaims, value);\n    \n    }\n\n    return (\n        <>\n        <div className='page'>\n            <h1> New Vesting Contract</h1>\n            <div className=\"contract\">\n                <label>\n                Beneficiary Address\n                <input type=\"text\" id=\"beneficiary\" />\n                </label>\n\n                <label>\n                Number of weeks the vesting should be over\n                <input type=\"text\" id=\"number-of-claims\" />\n                </label>\n\n                <label>\n                Deposit Amount (in ETH)\n                <input type=\"text\" id=\"ETH\" />\n                </label>\n\n                <div\n                className=\"button\"\n                id=\"deploy\"\n                onClick={(e) => {\n                    e.preventDefault();\n\n                    newContract();\n                }}\n                >\n                Deploy\n                </div>\n            </div>\n\n            {/* <div className=\"existing-contracts\">\n                <h1> Existing Contracts </h1>\n\n                <div id=\"container\">\n                {vesters.map((vester) => {\n                    return <Vester key={vester.address} {...vester} />;\n                })}\n                </div>\n            </div> */}\n            </div>\n        </>\n    );\n\n}\n\nexport default VestingContract;"],"mappings":"mcAAA,OAASA,MAAM,KAAQ,QAAQ,CAC/B,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAOC,OAAM,KAAM,iBAAiB,CAAC,6IAErC,GAAMC,SAAQ,CAAG,GAAIJ,OAAM,CAACK,SAAS,CAACC,YAAY,CAACC,MAAM,CAACC,QAAQ,CAAC,CAEnE,eAAsBC,MAAK,8CAGxB,mFAHI,kBAAqBC,eAAe,CAAEC,MAAM,6JACtBD,gBAAe,CAACE,OAAO,CAACD,MAAM,CAAC,CAACF,KAAK,EAAE,QAA1DI,UAAU,uCACVA,WAAU,CAACC,IAAI,EAAE,wDACxB,wCAEH,QAASC,gBAAe,EAAG,CAEvB,cAA8Bb,QAAQ,EAAE,wCAAjCc,OAAO,eAAEC,UAAU,eAC1B,eAA4Bf,QAAQ,EAAE,yCAA/BS,MAAM,eAAEO,SAAS,eAExBjB,SAAS,CAAC,UAAM,SACGkB,YAAW,6IAA1B,uKAC2Bf,SAAQ,CAACgB,IAAI,CAAC,qBAAqB,CAAE,EAAE,CAAC,QAAzDC,QAAQ,eAEdJ,UAAU,CAACI,QAAQ,CAAC,CAAC,CAAC,CAAC,CACvBH,SAAS,CAACd,QAAQ,CAACkB,SAAS,EAAE,CAAC,CAAC,qDACnC,8CAEDH,WAAW,EAAE,CACb,CAAC,CAAE,CAACH,OAAO,CAAC,CAAC,CAAC,QAEHO,YAAW,6IAA1B,8MACUC,WAAW,CAAGC,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC,CAACC,KAAK,CAC1DC,cAAc,CAAGC,QAAQ,CAACJ,QAAQ,CAACC,cAAc,CAAC,kBAAkB,CAAC,CAACC,KAAK,CAAC,CAClF;AACI;AACEA,KAAK,CAAG3B,MAAM,CAAC8B,KAAK,CAACC,UAAU,CAACN,QAAQ,CAACC,cAAc,CAAC,KAAK,CAAC,CAACC,KAAK,CAAC,CACrEK,eAAe,CAAG,4CAA4C,wBACtC7B,OAAM,CAAC6B,eAAe,CAAErB,MAAM,CAAEa,WAAW,CAAEI,cAAc,CAAED,KAAK,CAAC,QAA3FjB,eAAe,uEAExB,8CAED,mBACI,sCACA,aAAK,SAAS,CAAC,MAAM,wBACjB,oBAAI,uBAAqB,EAAK,cAC9B,aAAK,SAAS,CAAC,UAAU,wBACrB,yBAAO,qBAEP,4BAAO,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAG,GAC9B,cAER,yBAAO,4CAEP,4BAAO,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,kBAAkB,EAAG,GACnC,cAER,yBAAO,yBAEP,4BAAO,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,EAAG,GACtB,cAER,YACA,SAAS,CAAC,QAAQ,CAClB,EAAE,CAAC,QAAQ,CACX,OAAO,CAAE,iBAACuB,CAAC,CAAK,CACZA,CAAC,CAACC,cAAc,EAAE,CAElBX,WAAW,EAAE,CACjB,CAAE,UACD,QAED,EAAM,GACJ,GAWA,EACP,CAGX,CAEA,cAAeR,gBAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}