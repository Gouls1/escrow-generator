{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sylvainvendeol/Documents/GitHub/escrow-generator/app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/sylvainvendeol/Documents/GitHub/escrow-generator/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sylvainvendeol/Documents/GitHub/escrow-generator/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{ethers}from'ethers';import{useEffect,useState}from'react';import deploy from'./escrowDeploy';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var provider=new ethers.providers.Web3Provider(window.ethereum);function SimpleEscrow(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),account=_useState2[0],setAccount=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),signer=_useState4[0],setSigner=_useState4[1];useEffect(function(){function getAccounts(){return _getAccounts.apply(this,arguments);}function _getAccounts(){_getAccounts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var accounts;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return provider.send('eth_requestAccounts',[]);case 2:accounts=_context.sent;setAccount(accounts[0]);setSigner(provider.getSigner());case 5:case\"end\":return _context.stop();}},_callee);}));return _getAccounts.apply(this,arguments);}getAccounts();},[account]);function newContract(){return _newContract.apply(this,arguments);}function _newContract(){_newContract=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var beneficiary,arbiter,value,historyContractAddress,escrowContract;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:beneficiary=document.getElementById('beneficiary').value;arbiter=document.getElementById('arbiter').value;value=ethers.utils.parseEther(document.getElementById('ETH').value);historyContractAddress='0xD81267Ce7922fbaAd6D9ac4422B312D4516586FD';_context2.next=6;return deploy(signer,historyContractAddress,arbiter,beneficiary,value);case 6:escrowContract=_context2.sent;case 7:case\"end\":return _context2.stop();}},_callee2);}));return _newContract.apply(this,arguments);}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\" New Escrow Contract\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"contract\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Third party address that will approve or decline the transfer of funds\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"arbiter\"})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Beneficiary of the funds\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"beneficiary\"})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Deposit Amount (in ETH)\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"ETH\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"button\",id:\"deploy\",onClick:function onClick(e){e.preventDefault();newContract();},children:\"Deploy\"})]})]})});}export default SimpleEscrow;","map":{"version":3,"names":["ethers","useEffect","useState","deploy","provider","providers","Web3Provider","window","ethereum","SimpleEscrow","account","setAccount","signer","setSigner","getAccounts","send","accounts","getSigner","newContract","beneficiary","document","getElementById","value","arbiter","utils","parseEther","historyContractAddress","escrowContract","e","preventDefault"],"sources":["/Users/sylvainvendeol/Documents/GitHub/escrow-generator/app/src/pages/SimpleEscrow/escrowContract.js"],"sourcesContent":["import { ethers } from 'ethers';\nimport { useEffect, useState } from 'react';\nimport deploy from './escrowDeploy';\n\nconst provider = new ethers.providers.Web3Provider(window.ethereum);\n\nfunction SimpleEscrow() {\n\n    const [account, setAccount] = useState();\n    const [signer, setSigner] = useState();\n\n    useEffect(() => {\n    async function getAccounts() {\n        const accounts = await provider.send('eth_requestAccounts', []);\n\n        setAccount(accounts[0]);\n        setSigner(provider.getSigner());\n    }\n\n    getAccounts();\n    }, [account]);\n\n\n    async function newContract() {\n        const beneficiary = document.getElementById('beneficiary').value;\n        const arbiter = document.getElementById('arbiter').value;\n        const value = ethers.utils.parseEther(document.getElementById('ETH').value);\n        const historyContractAddress = '0xD81267Ce7922fbaAd6D9ac4422B312D4516586FD';\n        const escrowContract = await deploy(signer, historyContractAddress, arbiter, beneficiary, value);\n    }\n\n    return (\n        <>\n        <div className='page'>\n            <h1> New Escrow Contract</h1>\n            <div className=\"contract\">\n                <label>\n                Third party address that will approve or decline the transfer of funds\n                <input type=\"text\" id=\"arbiter\" />\n                </label>\n\n                <label>\n                Beneficiary of the funds\n                <input type=\"text\" id=\"beneficiary\" />\n                </label>\n\n                <label>\n                Deposit Amount (in ETH)\n                <input type=\"text\" id=\"ETH\" />\n                </label>\n\n                <div\n                className=\"button\"\n                id=\"deploy\"\n                onClick={(e) => {\n                    e.preventDefault();\n\n                    newContract();\n                }}\n                >\n                Deploy\n                </div>\n            </div>\n        </div>\n        </>\n    );\n}\n\nexport default SimpleEscrow;"],"mappings":"mcAAA,OAASA,MAAM,KAAQ,QAAQ,CAC/B,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAOC,OAAM,KAAM,gBAAgB,CAAC,6IAEpC,GAAMC,SAAQ,CAAG,GAAIJ,OAAM,CAACK,SAAS,CAACC,YAAY,CAACC,MAAM,CAACC,QAAQ,CAAC,CAEnE,QAASC,aAAY,EAAG,CAEpB,cAA8BP,QAAQ,EAAE,wCAAjCQ,OAAO,eAAEC,UAAU,eAC1B,eAA4BT,QAAQ,EAAE,yCAA/BU,MAAM,eAAEC,SAAS,eAExBZ,SAAS,CAAC,UAAM,SACDa,YAAW,6IAA1B,uKAC2BV,SAAQ,CAACW,IAAI,CAAC,qBAAqB,CAAE,EAAE,CAAC,QAAzDC,QAAQ,eAEdL,UAAU,CAACK,QAAQ,CAAC,CAAC,CAAC,CAAC,CACvBH,SAAS,CAACT,QAAQ,CAACa,SAAS,EAAE,CAAC,CAAC,qDACnC,8CAEDH,WAAW,EAAE,CACb,CAAC,CAAE,CAACJ,OAAO,CAAC,CAAC,CAAC,QAGCQ,YAAW,6IAA1B,6MACUC,WAAW,CAAGC,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC,CAACC,KAAK,CAC1DC,OAAO,CAAGH,QAAQ,CAACC,cAAc,CAAC,SAAS,CAAC,CAACC,KAAK,CAClDA,KAAK,CAAGtB,MAAM,CAACwB,KAAK,CAACC,UAAU,CAACL,QAAQ,CAACC,cAAc,CAAC,KAAK,CAAC,CAACC,KAAK,CAAC,CACrEI,sBAAsB,CAAG,4CAA4C,wBAC9CvB,OAAM,CAACS,MAAM,CAAEc,sBAAsB,CAAEH,OAAO,CAAEJ,WAAW,CAAEG,KAAK,CAAC,QAA1FK,cAAc,uEACvB,8CAED,mBACI,sCACA,aAAK,SAAS,CAAC,MAAM,wBACjB,oBAAI,sBAAoB,EAAK,cAC7B,aAAK,SAAS,CAAC,UAAU,wBACrB,yBAAO,wEAEP,4BAAO,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,EAAG,GAC1B,cAER,yBAAO,0BAEP,4BAAO,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAG,GAC9B,cAER,yBAAO,yBAEP,4BAAO,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,EAAG,GACtB,cAER,YACA,SAAS,CAAC,QAAQ,CAClB,EAAE,CAAC,QAAQ,CACX,OAAO,CAAE,iBAACC,CAAC,CAAK,CACZA,CAAC,CAACC,cAAc,EAAE,CAElBX,WAAW,EAAE,CACjB,CAAE,UACD,QAED,EAAM,GACJ,GACJ,EACH,CAEX,CAEA,cAAeT,aAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}